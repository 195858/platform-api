#
# Solace Platform API Server
# Linux
#
version: "3.3"
services:
  platform-api-server:
    container_name: "${CONTAINER_NAME}"
    image: "${IMAGE}"
    network_mode: host
    volumes:
      - ${PLATFORM_DATA_MOUNT_PATH}:${PLATFORM_DATA_INTERNAL_PATH}
    restart: unless-stopped
    environment:
      - DB_URL=${DB_URL}
      - LOG_LEVEL=${LOG_LEVEL}
      - APP_ID=${APP_ID}
      - FILE_USER_REGISTRY=${FILE_USER_REGISTRY}
      - PLATFORM_PORT=${PLATFORM_PORT}
      - AUTH_EXTRACTION_USER_PRINCIPAL=${AUTH_EXTRACTION_USER_PRINCIPAL}
      - AUTH_EXTRACTION_ORGS=${AUTH_EXTRACTION_ORGS}
      - AUTH_EXTRACTION_ROLES=${AUTH_EXTRACTION_ROLES}
      - AUTH_VERIFICATION_KEY=${AUTH_VERIFICATION_KEY}
      - AUTH_VERIFICATION_ISSUER=${AUTH_VERIFICATION_ISSUER}
      - AUTH_VERIFICATION_AUD=${AUTH_VERIFICATION_AUD}
      - AUTH_DISCOVERY_OIDC_URL=${AUTH_DISCOVERY_OIDC_URL}
